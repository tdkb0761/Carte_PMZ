<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Redirection Google Maps</title>
</head>
<body>
  <p>Redirection en cours...</p>
  <script>
    const params = new URLSearchParams(window.location.search);
    const filtre = params.get('filtre');

    if (filtre) {
      fetch('PointGPS21.json')
        .then(response => response.json())
        .then(points => {
          if (points[filtre]) {
            const [lat, lon] = points[filtre];
            const mapsUrl = `https://www.google.com/maps?q=${lat},${lon}`;
            window.location.href = mapsUrl; // redirection immédiate
          } else {
            document.body.innerHTML = `<p>Code "${filtre}" introuvable.</p>`;
          }
        })
        .catch(() => {
          document.body.innerHTML = "<p>Erreur de chargement des données.</p>";
        });
    } else {
      document.body.innerHTML = "<p>Aucun code fourni dans l'URL.</p>";
    }
  </script>
</body>
</html>
